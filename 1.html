<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    @import url(./danhsachyeucau.css);
  </style>
</head>

<body>
  <div class="header">
    <div class="left">
      <div class="title">Danh sách yêu cầu</div>
    </div>
    <div class="right">
      <button id="createNew"><span><i class="fas fa-search"></i>Tạo mới</span></button>
    </div>
  </div>
  <div class="tab-container">
    <div class="tab-header">
      <button id="button1" class="tab-button active" onclick="openTab(event, 'tab-1')">
        <i class="fa-solid fa-house"></i>
        <span>Yêu cầu chung</span>
        <span class="tab-number">4</span>
      </button>
      <button id="button2" class="tab-button" onclick="openTab(event, 'tab-2')">
        <i class="fa-solid fa-house"></i>
        <span>Yêu cầu chờ bổ sung thông tin</span>
        <span class="tab-number">4</span>
      </button>
      <button id="button3" class="tab-button" onclick="openTab(event, 'tab-3')">
        <i class="fa-solid fa-house"></i>
        <span>Yêu cầu đã xử lý xong</span>
        <span class="tab-number">4</span>
      </button>
    </div>

    <div class="tab-content" id="tab-1">
    </div>
    <div class="tab-content" id="tab-2">
      <h2>Tab 2 Content</h2>
      <p>This is the content for Tab 2.</p>
    </div>
    <div class="tab-content" id="tab-3">
      <h2>Tab 3 Content</h2>
      <p>This is the content for Tab 3.</p>
    </div>
  </div>
</body>
<script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
  crossorigin="anonymous"></script>
<script src="./1.js"></script>
<script>
  $(document).ready(function () {
    openTab('', 'tab-1');
  });

  function openTab(evt, tabName) {
    $('.tab-content').hide();
    $('.tab-button').removeClass('active');
    $('#' + tabName).show();
    $(evt.currentTarget).addClass('active');

    // Remove existing elements in the tab
    $('#' + tabName).empty();

    if (tabName === 'tab-1') {
      fetchAndRenderData(tabName, '');
    } else if (tabName === 'tab-2') {
      fetchAndRenderData(tabName, 'ProgressSR');
    }
    else if (tabName === 'tab-3') {
      fetchAndRenderData(tabName, 'UpdateSR');
    }
  }

  function fetchAndRenderData(tabName, status) {
    var filteredData = [...data];
    if (status) {
      // Filter data based on the status
      filteredData = data.filter(function (item) {
        return item.status === status;
      });
    }


    // Render the filtered data in the specified tab
    renderData(tabName, filteredData);
  }

  function renderData(tabName, data) {
    var tabContent = $('#' + tabName);

    // Create the filter section
    var filterDiv = $('<div>').addClass('filter');
    var inputDiv = $('<div>').addClass('input-icon');
    var searchInput = $('<input>').attr('type', 'text').attr('id', 'searchInput').attr('placeholder', 'Tìm kiếm');
    var searchIcon = $('<i>').addClass('fas fa-search');
    inputDiv.append(searchInput, searchIcon);
    var selectDiv = $('<div>').addClass('filter-select');
    var span = $('<span>').text('Phòng ban');
    var select = $('<select>').attr('id', 'filterSelect');
    var option = $('<option>').val('').text('Hiển thị tất cả');
    select.append(option);
    selectDiv.append(span, select);
    filterDiv.append(inputDiv, selectDiv);

    // Create the table section
    var tableDiv = $('<div>').addClass('table');
    var cardDiv = $('<div>').addClass('card').attr('id', 'listingTable');
    var paginationDiv = $('<div>').addClass('pagination');
    var btnPrev = $('<a>').attr('href', '#').attr('id', 'btnPrev').text('Trước');
    var pageSpan = $('<span>').attr('id', 'page');
    var btnNext = $('<a>').attr('href', '#').attr('id', 'btnNext').text('Sau');
    paginationDiv.append(btnPrev, pageSpan, btnNext);
    tableDiv.append(cardDiv, paginationDiv);

    // Append the created elements to the tab
    tabContent.append(filterDiv, tableDiv);
    console.log(`data in ${tabName}`, data)
  }

</script>

</html>